---
title: Graceful Restarts
description: Graceful restarts of Teleport.
---

## Teleport daemon

The Teleport daemon is called [`teleport`](../reference/cli.mdx#teleport) and it supports
the following commands:

| Command | Description |
| - | - |
| start | Starts the Teleport daemon. |
| configure | Dumps a sample configuration file in YAML format into standard output. |
| version | Shows the Teleport version. |
| status | Shows the status of a Teleport connection. This command is only available from inside of an active SSH session. |
| help | Shows help options. |

When experimenting, you can quickly start [`teleport`](../reference/cli.mdx#teleport) with verbose logging by typing [`teleport start -d`](../reference/cli.mdx#teleport-start).

<Admonition
  type="danger"
  title="WARNING"
>
  Teleport stores data in `/var/lib/teleport` . Make sure that regular/non-admin users do not have access to this folder on the Auth server.
</Admonition>

### Systemd unit file

In production, we recommend starting teleport daemon via an init system like `systemd`. Here's the recommended Teleport service unit file for `systemd`:

```systemd
[Unit]
Description=Teleport SSH Service
After=network.target

[Service]
Type=simple
Restart=on-failure
ExecStart=/usr/local/bin/teleport start --config=/etc/teleport.yaml --pid-file=/run/teleport.pid
ExecReload=/bin/kill -HUP $MAINPID
PIDFile=/run/teleport.pid

[Install]
WantedBy=multi-user.target
```

### Graceful restarts

If using the `systemd` service unit file above, executing `systemctl reload teleport` will perform a graceful restart, i.e. the Teleport daemon will fork a
new process to handle new incoming requests, leaving the old daemon process running until existing clients disconnect.

<Admonition
  type="warning"
  title="Version warning"
>
  Graceful restarts only work if Teleport is deployed using network-based storage like DynamoDB or etcd 3.3+. We plan on removing this limitation in future versions of Teleport.
</Admonition>

You can also perform restarts/upgrades by sending `kill` signals to a Teleport
daemon manually.

| Signal | Teleport Daemon Behavior |
| - | - |
| `USR1` | Dumps diagnostics/debugging information into syslog. |
| `TERM` , `INT` or `KILL` | Immediate non-graceful shutdown. All existing connections will be dropped. |
| `USR2` | Forks a new Teleport daemon to serve new connections. |
| `HUP` | Forks a new Teleport daemon to serve new connections **and** initiates the graceful shutdown of the existing process when there are no more clients connected to it. |
